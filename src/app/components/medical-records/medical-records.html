<div class="min-h-screen bg-gray-100 p-6 space-y-8">

  <!-- Page Header -->
  <div class="max-w-7xl mx-auto mb-6">
    <h1 class="text-3xl font-bold text-blue-700">Medical Records</h1>
    <p class="text-gray-600 mt-1">
      View patient medical records, test results, and treatment history.
    </p>
  </div>

  <!-- Success and Error Messages -->
  <div *ngIf="successMessage" class="max-w-7xl mx-auto text-green-500 text-center mb-4">
    {{ successMessage }}
  </div>
  <div *ngIf="errorMessage" class="max-w-7xl mx-auto text-red-500 text-center mb-4">
    {{ errorMessage }}
  </div>

  <!-- Search and Date Filters -->
  <div class="max-w-7xl mx-auto mb-6 space-y-4">
    <div class="flex flex-col md:flex-row gap-4">
      <div class="flex-1">
        <input type="text" [(ngModel)]="searchTerm" placeholder="Search medical records..."
          class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-400 focus:outline-none">
      </div>
      <div class="flex gap-2">
        <input type="date" [(ngModel)]="startDate" placeholder="Start Date"
          class="px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-400 focus:outline-none">
        <input type="date" [(ngModel)]="endDate" placeholder="End Date"
          class="px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-400 focus:outline-none">
      </div>
    </div>
  </div>

  <!-- Medical Records Table -->
  <div class="max-w-7xl mx-auto overflow-x-auto">
    <table class="min-w-full bg-white rounded-lg shadow-md overflow-hidden">
      <thead class="bg-blue-700 text-white">
        <tr>
          <th class="px-4 py-2 text-left">Patient Name</th>
          <th class="px-4 py-2 text-left">Doctor Name</th>
          <th class="px-4 py-2 text-left">Test Name</th>
          <th class="px-4 py-2 text-left">Date</th>
          <th class="px-4 py-2 text-left">Status</th>
          <th class="px-4 py-2 text-left">Type</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        <!-- Loading row -->
        <tr *ngIf="isLoading">
          <td colspan="6" class="text-center py-4 text-gray-500">
            <div class="flex justify-center items-center">
              <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"></div>
              <span class="ml-2">Loading medical records...</span>
            </div>
          </td>
        </tr>

        <!-- Error row -->
        <tr *ngIf="errorMessage && !isLoading">
          <td colspan="6" class="text-center py-4 text-red-500">{{ errorMessage }}</td>
        </tr>

        <!-- Data rows -->
        <tr *ngFor="let record of filteredRecords" class="hover:bg-gray-50">
          <td class="px-4 py-2">{{ record.patient_first_name }} {{ record.patient_last_name }}</td>
          <td class="px-4 py-2">{{ record.doctor_first_name }} {{ record.doctor_last_name }}</td>
          <td class="px-4 py-2">{{ record.name }}</td>
          <td class="px-4 py-2">{{ record.date }}</td>
          <td class="px-4 py-2">
            <span [ngClass]="record.status === 'completed' ? 'text-green-600 font-semibold' : 'text-yellow-600 font-semibold'">
              {{ record.status | titlecase }}
            </span>
          </td>
          <td class="px-4 py-2">{{ record.type }}</td>
        </tr>

        <!-- No records row -->
        <tr *ngIf="!isLoading && !errorMessage && filteredRecords.length === 0">
          <td colspan="6" class="text-center py-4 text-gray-500">No medical records found.</td>
        </tr>
      </tbody>
    </table>
  </div>

</div>